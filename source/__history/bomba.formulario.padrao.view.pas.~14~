unit bomba.formulario.padrao.view;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.ComCtrls, bomba.conexao.datamodule, FireDAC.Stan.Intf, FireDAC.Stan.Option,
  FireDAC.Stan.Param, FireDAC.Stan.Error, FireDAC.DatS, FireDAC.Phys.Intf, FireDAC.DApt.Intf, FireDAC.Stan.Async,
  FireDAC.DApt, Data.DB, FireDAC.Comp.DataSet, FireDAC.Comp.Client, Vcl.Buttons, Vcl.ExtCtrls, Vcl.StdCtrls, Vcl.Grids,
  Vcl.DBGrids, FireDAC.UI.Intf, FireDAC.VCLUI.Wait, FireDAC.Comp.UI;

type
  TfrmCadPadrao = class(TForm)
    pcPrincipal: TPageControl;
    tbsListagem: TTabSheet;
    tbsDados: TTabSheet;
    qryCadastro: TFDQuery;
    dsCadastro: TDataSource;
    Panel1: TPanel;
    spdbtnExcluir: TSpeedButton;
    spdbtnEditar: TSpeedButton;
    spdbtnNovo: TSpeedButton;
    Panel2: TPanel;
    spdbtnSalvar: TSpeedButton;
    spdbtnCancelar: TSpeedButton;
    Panel3: TPanel;
    lblTitulo: TLabel;
    dbgListagem: TDBGrid;
    FDGUIxWaitCursor1: TFDGUIxWaitCursor;
    Label1: TLabel;
    edtPesquisar: TEdit;
    spdbtnPesquisar: TSpeedButton;
    procedure FormCreate(Sender: TObject);
    procedure dsCadastroDataChange(Sender: TObject; Field: TField);
  private
    { Private declarations }
  public
    procedure MudarTituloTela(EstadoTabela: TDataSetState; NomeTela: String);
  end;

var
  frmCadPadrao: TfrmCadPadrao;

implementation

{$R *.dfm}

procedure TfrmCadPadrao.dsCadastroDataChange(Sender: TObject; Field: TField);
begin
  spdbtnEditar.Enabled := not dsCadastro.DataSet.IsEmpty;
  spdbtnExcluir.Enabled := not dsCadastro.DataSet.IsEmpty;
  if dsCadastro.DataSet.State in [dsBrowse] then
    lblTitulo.Caption := 'Listagem de '+Self.Caption;
end;

procedure TfrmCadPadrao.FormCreate(Sender: TObject);
var
  I: Integer;
begin
  for I := 0 to pcPrincipal.PageCount -1 do
    pcPrincipal.Pages[I].TabVisible := False;
  pcPrincipal.ActivePage := tbsListagem;

  if not qryCadastro.Active then
    qryCadastro.Active := True;
end;

procedure TfrmCadPadrao.MudarTituloTela(EstadoTabela: TDataSetState; NomeTela: String);
begin

end;

end.
